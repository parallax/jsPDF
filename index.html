<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>jsPDF - Create PDFs with HTML5 JavaScript Library</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Bootstrap -->
	<link href="./examples/css/bootstrap.min.css" rel="stylesheet">

	<!-- Editor CSS -->
	<link href="./examples/css/editor.css" rel="stylesheet">
	<style>
		@font-face {
			font-family: 'material icons';
			font-style: normal;
			font-weight: 400;
			src: url(https://cdnjs.cloudflare.com/ajax/libs/mdui/0.1.2/icons/material-icons/MaterialIcons-Regular.ttf) format('truetype');
		}
	</style>
</head>

	<body>
		<div style="width: 21cm;" id="page">
			Icon
			<span style="font-family: 'material icons'; font-size: 24px">check</span>
		  </div>
		  <button onclick="printBody()">Print</button>

		

		<!-- Scripts down here -->
		<script   src="./examples/js/jquery/jquery-1.7.1.min.js"></script>

		<script type="text/javascript" src="dist/polyfills.umd.js"></script>
		<script type="text/javascript" src="dist/jspdf.umd.js"></script>

		<script type="text/javascript">
			var jsPDF = window.jspdf.jsPDF;
			$(document).ready(function() {
				if(jsPDF && jsPDF.version) {
					$('#dversion').text('Version ' + jsPDF.version);
				}
			});
		</script>

		<!-- Code editor -->

		<script src="./examples/js/ace.js" type="text/javascript" charset="utf-8"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

		<!-- Scripts in development mode -->
		<script type="text/javascript" src="./examples/js/pdfobject.min.js"></script>
		<script type="text/javascript" src="./examples/js/editor.js"></script>
		<script>
			async function printBody() {
				console.log('dsfhj')
				var doc =  new jsPDF('p', 'cm', [21, 29.6]);

				html2canvas(document.querySelector("#page")).then(canvas => {
					document.body.appendChild(canvas)
				});

				var div = document.querySelector('#page');

				await doc.html(div, { 
					width: 21, 
					windowWidth: div.clientWidth,
					fontFaces: [{
						family: 'Material Icons',
						style: 'normal',
						weight: 400,
						src: [{ 
						url: 'https://cdnjs.cloudflare.com/ajax/libs/mdui/0.1.2/icons/material-icons/MaterialIcons-Regular.ttf', 
						format: 'truetype' }]}]
				});
				const res = setTimeout(function() {window.open(doc.output('bloburl'))}, 5000)
				
				}
		</script>
	</body>
</html>
